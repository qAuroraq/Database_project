{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\src\\views\\Register.vue?vue&type=style&index=0&id=63ae9146&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\src\\views\\Register.vue","mtime":1641111980888},{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1640434318927},{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1640434334762},{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1640434322520},{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640434318897},{"path":"C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1640434324590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogICAgLmxvZ2luLWNvbnRhaW5lciB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgfQ0KICAgIC5sb2dpbi1wYWdlIHsNCiAgICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgbWFyZ2luOiAxODBweCBhdXRvOw0KICAgICAgICB3aWR0aDogMzUwcHg7DQogICAgICAgIHBhZGRpbmc6IDM1cHggMzVweCAxNXB4Ow0KICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWFlYWVhOw0KICAgICAgICBib3gtc2hhZG93OiAwIDAgMjVweCAjY2FjNmM2Ow0KICAgIH0NCg=="},{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\project\\源代码\\vue\\src\\views\\Register.vue"],"names":[],"mappings":";IA6MI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC","file":"C:/Users/Administrator/Desktop/project/源代码/vue/src/views/Register.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <div class=\"login-container\" >\r\n        <el-form\r\n                ref=\"ruleForm\"\r\n                :model=\"ruleForm\"\r\n                status-icon\r\n                :rules=\"rules\"\r\n                label-position=\"top\"\r\n                class=\"login-page\"\r\n        >\r\n            <h3 class=\"title\">用户注册</h3>\r\n            <el-form-item prop=\"number\" label=\"电话号码\" :rules=\"[\r\n        {\r\n          required: true,\r\n          message: '请输入电话号码!',\r\n          trigger: 'blur',\r\n        }]\">\r\n                <el-input v-model=\"ruleForm.number\" placeholder=\"电话号码\" :prefix-icon=\"Avatar\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\" label=\"密码\">\r\n                <el-input\r\n                        v-model=\"ruleForm.password\"\r\n                        type=\"password\"\r\n                        autocomplete=\"off\"\r\n                        placeholder=\"密码\"\r\n                        :prefix-icon=\"Lock\"\r\n                ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"checkPass\" label=\"再次输入密码\">\r\n                <el-input\r\n                        v-model=\"ruleForm.checkPass\"\r\n                        type=\"password\"\r\n                        autocomplete=\"off\"\r\n                        placeholder=\"再次输入密码\"\r\n                        :prefix-icon=\"Lock\"\r\n                ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n                >确定</el-button\r\n                >\r\n                <el-button @click=\"resetForm('ruleForm')\">返回登陆页</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <el-dialog\r\n                v-model=\"dialogVisible\"\r\n                title=\"实名制信息填写\"\r\n                width=\"30%\"\r\n        >\r\n\r\n            <el-form\r\n                    ref=\"form\"\r\n                    :model=\"form\"\r\n                    status-icon\r\n                    :rules=\"rules\"\r\n                    label-position=\"top\"\r\n            >\r\n                <el-form-item prop=\"name\" label=\"姓名\" :rules=\"[\r\n        {\r\n          required: true,\r\n          message: '请输入姓名!',\r\n          trigger: 'blur',\r\n        }]\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"姓名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"idCard\" label=\"身份证号\" :rules=\"[\r\n        {\r\n          required: true,\r\n          message: '请输入身份证号!',\r\n          trigger: 'blur',\r\n        }]\">\r\n                    <el-input v-model=\"form.idCard\" placeholder=\"身份证号\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"age\" label=\"年龄\" :rules=\"[\r\n        {\r\n          required: true,\r\n          message: '请输入年龄!',\r\n          trigger: 'blur',\r\n        }]\">\r\n                    <el-input v-model.number=\"form.age\" label=\"年龄\" placeholder=\"年龄\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"sex\" label=\"性别\" :rules=\"[\r\n        {\r\n          required: true,\r\n          message: '请选择性别!',\r\n          trigger: 'blur',\r\n        }]\">\r\n                    <el-radio v-model=\"form.sex\" label=\"男\">男</el-radio>\r\n                    <el-radio v-model=\"form.sex\" label=\"女\">女</el-radio>\r\n                </el-form-item>\r\n\r\n            </el-form>\r\n            <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSubmit\"\r\n        >提交</el-button\r\n        >\r\n      </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import request from \"../utils/request\";\r\n    import {ElMessage} from \"element-plus\";\r\n    import {Avatar} from '@element-plus/icons-vue'\r\n    import {Lock} from \"@element-plus/icons-vue\"\r\n    //这个东西的注册要在data return里不可以注册为组件\r\n\r\n    export default {\r\n\r\n        data() {\r\n            //官方给出的一种判断方法，其实不如required:true\r\n            const validatePass = (rule, value, callback) => {\r\n                if (value === '') {\r\n                    callback(new Error('请输入密码！'))\r\n                } else {\r\n                    if (this.ruleForm.checkPass !== '') {\r\n                        this.$refs.ruleForm.validateField('checkPass')\r\n                    }\r\n                    callback()\r\n                }\r\n            }\r\n            const validatePass2 = (rule, value, callback) => {\r\n                if (value === '') {\r\n                    callback(new Error('请再次输入密码！'))\r\n                } else if (value !== this.ruleForm.password) {\r\n                    callback(new Error('两次密码输入不匹配！'))\r\n                } else {\r\n                    callback()\r\n                }\r\n            }\r\n            return {\r\n                Lock,\r\n                Avatar,\r\n                form:{},\r\n                dialogVisible:false,\r\n                checkPass: '',\r\n                ruleForm: {\r\n                    number: '',\r\n                    password: '',\r\n                },\r\n                rules: {\r\n                    password: [{ validator: validatePass, trigger: 'blur' }],\r\n                    checkPass: [{ validator: validatePass2, trigger: 'blur' }],\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            handleSubmit() {\r\n                this.form.number = this.ruleForm.number\r\n                request.post(\"/user/realName\",this.form).then(res => {\r\n                    if(res.code === '0'){\r\n                        ElMessage({\r\n                            message: \"成功实名制!\",\r\n                            type: 'success',\r\n                        })\r\n                        this.dialogVisible=false\r\n                        this.$router.push(\"/home\")\r\n                    }\r\n                    else {\r\n                        ElMessage({\r\n                            message: res.msg,\r\n                            type: 'error',\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            submitForm(formName) {\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        request.post(\"/user/register\",this.ruleForm).then(res => {\r\n                            if(res.code === '0'){\r\n                                ElMessage({\r\n                                    message: \"成功注册!\",\r\n                                    type: 'success',\r\n                                })\r\n                                sessionStorage.setItem(\"id\",this.ruleForm.number)\r\n                                this.dialogVisible=true\r\n                            }\r\n                            else {\r\n                                ElMessage({\r\n                                    message: res.msg,\r\n                                    type: 'error',\r\n                                })\r\n                            }\r\n                        })\r\n                    } else {\r\n                        console.log('error submit!!')\r\n                        return false\r\n                    }\r\n                })\r\n            },\r\n            resetForm() {\r\n                this.$router.push('/login')\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .login-container {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .login-page {\r\n        -webkit-border-radius: 5px;\r\n        border-radius: 5px;\r\n        margin: 180px auto;\r\n        width: 350px;\r\n        padding: 35px 35px 15px;\r\n        background: #fff;\r\n        border: 1px solid #eaeaea;\r\n        box-shadow: 0 0 25px #cac6c6;\r\n    }\r\n</style>\r\n"]}]}